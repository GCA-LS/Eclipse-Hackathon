<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Youth Suicide Prevention System</title>
    <link rel="stylesheet" href="/static/fontawesome-5.5/css/all.min.css" />
    <link rel="stylesheet" href="slick/slick.css">
    <link rel="stylesheet" href="slick/slick-theme.css">
    <link rel="stylesheet" href="magnific-popup/magnific-popup.css">
    <link rel="stylesheet" href="static/css/bootstrap.min.css" />
    <link rel="stylesheet" href="static/css/tooplate-infinite-loop.css" />
    <link rel="stylesheet" href="static/styles.css">

  </head>
  <body>    
    <!-- Hero section -->
    <section id="infinite" class="text-white tm-font-big tm-parallax">
      <!-- Navigation -->
      <nav class="navbar navbar-expand-md tm-navbar" id="tmNav">              
        <div class="container">   
          <div class="tm-next">
              <a href="#infinite" class="navbar-brand">Suicide Prevention</a>
          </div>             
            
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <i class="fas fa-bars navbar-toggler-icon"></i>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                  <a class="nav-link tm-nav-link" href="#infinite">Home</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link tm-nav-link" href="#whatwedo">Chatbot</a>
              </li>
              <li class="nav-item">
                <a class="nav-link tm-nav-link" href="#testimonials">Resources</a>
              </li>
              </li>
              <li class="nav-item">
                  <a class="nav-link tm-nav-link" href="#gallery">Forum</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link tm-nav-link" href="#contact">Contact</a>
              </li>                    
            </ul>
          </div>        
        </div>
      </nav>
      
      <div class="text-center tm-hero-text-container">
        <div class="tm-hero-text-container-inner">
            <h2 class="tm-hero-title">Welcome to Our Support Platform</h2>
            <p class="tm-hero-subtitle">
              We understand that life can feel overwhelming sometimes. Our system is here to provide a safe, 
            non-judgmental space for you to express your thoughts and find support. Our AI-driven chatbot, 
            resources, and community are all designed to help you in times of need.
            </p>

        </div> 

      </div>

      <div class="tm-next tm-intro-next">
        <a href="#whatwedo" class="text-center tm-down-arrow-link">
          <i class="fas fa-2x fa-arrow-down tm-down-arrow"></i>
        </a>
      </div>      
    </section>

    <section id="whatwedo" class="tm-section-pad-top">
      
      <div class="container">

            <div class="row tm-content-box"><!-- first row -->
                <div class="col-lg-12 col-xl-12">
                    <div class="tm-intro-text-container">
                        <h2 class="tm-text-primary mb-4 tm-section-title">Chat with Us</h2>
                        <p class="mb-4 tm-intro-text">
                          Welcome to the youth suicide prevention chatbox. Here, you can talk freely about what you're going through
                          , ask questions, or just share what's on your mind. This chatbot is designed to listen, provide support, and guide you to resources that can help with whatever you're facing. While this isn't a substitude for professional help, it can be a comforting first step toward feeling better or learning more about mental health.
                           </p>
                    </div>
                </div>

            </div>

           <!-- Chatbot Section -->
    <section id="chatbot">
        <h2>Chat with Us</h2>
        <div class="chat-container">
            <div class="chat-messages" id="chatMessages">
                <!-- Messages will go here -->
            </div>
            <div class="chat-input-container">
                <input type="text" id="chatInput" placeholder="Type a message..." />
                <button id="sendButton" onclick="sendMessage()">Send</button>
            </div>
        </div>
    </section>
            <br><br><br><br><br>
        
    </section>

    <!-- Resource Hub section-->
       
    
    <section id="testimonials" class="tm-section-pad-top tm-parallax-2">      
      <div class="container tm-testimonials-content">
        <div class="row">
          <div class="col-lg-12 tm-content-box">
            <h2 class="text-white text-center mb-4 tm-section-title">Resource Hub</h2>
            <p>Explore articles, tips, and activities to help you take care of yourself and support your mental well-being.</p>

            <div class="mx-auto tm-gallery-container tm-gallery-container-2">
              <div class="tm-testimonials-carousel">
                <!-- Resource Categories -->
        <!-- Detailed Resource Sections -->
    <section id="resource1">
        <h3>Mindfulness and Meditation</h3>
        <p>Learn how mindfulness practices and meditation techniques can help you stay grounded <br>and calm in difficult times. These exercises improve emotional awareness and reduce stress. <br><a href="https://www.mindful.org/meditation/mindfulness-getting-started/" target="_blank">Learn more here</a>.</p>
    </section>

    <section id="resource2">
        <h3>Physical Exercise for Mental Health</h3>
        <p>Explore how regular physical activity positively impacts mental well-being, reduces anxiety,<br> and boosts mood. Activities such as walking, cycling, and yoga can be beneficial.<br> <a href="https://www.mentalhealth.org.uk/a-to-z/e/exercise-and-mental-health" target="_blank">Read more on the benefits of exercise</a>.</p>
    </section>

    <section id="resource3">
        <h3>Sleep Hygiene Tips</h3>
        <p>Good sleep is essential for mental health. Find out how to create healthy sleep habits <br>to ensure you get restful sleep and wake up refreshed.<br> <a href="https://www.sleepfoundation.org/sleep-hygiene" target="_blank">Sleep Foundation's guide on sleep hygiene</a>.</p>
    </section>

    <section id="resource4">
        <h3>Understanding Your Emotions</h3>
        <p>Gaining insight into your emotions can help you manage them effectively. This guide provides<br> tools for self-reflection and emotional regulation. <br><a href="https://www.psychologytoday.com/us/basics/emotion-regulation" target="_blank">Read the guide on emotional regulation</a>.</p>
    </section>

    <section id="resource5">
        <h3>Building a Support System</h3>
        <p>A strong support system is essential for mental health. Learn how to build and maintain <br>supportive relationships and seek help when needed. <br><a href="https://www.verywellmind.com/importance-of-a-support-system-in-recovery-5077616" target="_blank">Verywell Mind article on support systems</a>.</p>
    </section>

    <section id="resource6">
        <h3>Recognizing When to Seek Help</h3>
        <p>It's crucial to know when to reach out for support. This resource helps identify signs that <br>it may be time to consult a mental health professional.<br> <a href="https://www.nimh.nih.gov/health/topics/getting-help" target="_blank">Learn more about getting help</a>.</p>
    </section>

        </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="tm-bg-overlay"></div>
    </section>
    
    <!-- Gallery -->
    <section id="gallery" class="tm-section-pad-top">
      <div class="container tm-container-gallery">
        <div class="row">
          <div class="text-center col-12">
              <h2 class="tm-text-primary tm-section-title mb-4">Anonymous Peer Support Forum</h2>
              <p class="mx-auto tm-section-desc">
                Share your thoughts, connect with others, and find support in our anonymous, safe forum.</p>
          </div>            
        </div>
        <div class="row">
            <div class="col-12">
                <div class="mx-auto tm-gallery-container">
                     <!-- Post Form -->
        <div id="post-form">
            <textarea id="post-input" placeholder="Share your thoughts..." rows="4"></textarea>
            <button id="post-button">Post</button>
        </div>

        <!-- Posts Display -->
        <div id="posts">
            <!-- User posts will be dynamically added here via JavaScript -->
            <p>No posts yet. Be the first to share!</p>
        </div>
                </div>                
            </div>        
          </div>
      </div>
    </section>

    <!-- Contact -->
    <section id="contact" class="tm-section-pad-top tm-parallax-2">
    
      <div class="container tm-container-contact">
        
        <div class="row">
            
            <div class="text-center col-12">
                <h2 class="tm-section-title mb-4">Emergency Contact Information</h2>
                <p class="mb-5">
                  If you need immediate assistance or support, please use the contacts below:
                </p><br>
            </div>
            
            <div class="col-sm-12 col-md-6">
              <form action="" method="get">
                <ul>
            <li><strong>Suicide Prevention Hotline:</strong> <a href="tel:123-456-7890">123-456-7890</a></li>
            <li><strong>Mental Health Support Line:</strong> <a href="tel:098-765-4321">098-765-4321</a></li>
            <li><strong>Email Support:</strong> <a href="mailto:support@youthprevention.org">support@youthprevention.org</a></li>
        </ul><br>
        <h3>Additional Resources</h3>

        <ul>
            <li><a href="https://www.mentalhealth.org" target="_blank">Mental Health Foundation</a></li>
            <li><a href="https://www.suicidepreventionlifeline.org" target="_blank">Suicide Prevention Lifeline</a></li>
            <li><a href="https://www.samhsa.gov" target="_blank">SAMHSA (Substance Abuse and Mental Health Services Administration)</a></li>
        </ul>
              </form>
            </div>
                                             
                <div class="contact-item">&nbsp;</div>
            
            </div>
            
            
        </div><!-- row ending -->
        
      </div>

      	<footer class="text-center small tm-footer">
          <p class="mb-0">
          &copy; 2024 Youth Suicide Prevention System. All rights reserved.
          
           <a rel="nofollow" href="#infinite" title="SP">Designed by 3Bros</a></p>
        </footer>

    </section>
    
    <script src="static/js/jquery-1.9.1.min.js"></script>     
    <script src="slick/slick.min.js"></script>
    <script src="magnific-popup/jquery.magnific-popup.min.js"></script>
    <script src="static/js/easing.min.js"></script>
    <script src="static/js/jquery.singlePageNav.min.js"></script>     
    <script src="static/js/bootstrap.min.js"></script>
    <script src="static/app.js"></script> 
    <script>

      function getOffSet(){
        var _offset = 450;
        var windowHeight = window.innerHeight;

        if(windowHeight > 500) {
          _offset = 400;
        } 
        if(windowHeight > 680) {
          _offset = 300
        }
        if(windowHeight > 830) {
          _offset = 210;
        }

        return _offset;
      }

      function setParallaxPosition($doc, multiplier, $object){
        var offset = getOffSet();
        var from_top = $doc.scrollTop(),
          bg_css = 'center ' +(multiplier * from_top - offset) + 'px';
        $object.css({"background-position" : bg_css });
      }

      // Parallax function
      // Adapted based on https://codepen.io/roborich/pen/wpAsm        
      var background_image_parallax = function($object, multiplier, forceSet){
        multiplier = typeof multiplier !== 'undefined' ? multiplier : 0.5;
        multiplier = 1 - multiplier;
        var $doc = $(document);
        // $object.css({"background-attatchment" : "fixed"});

        if(forceSet) {
          setParallaxPosition($doc, multiplier, $object);
        } else {
          $(window).scroll(function(){          
            setParallaxPosition($doc, multiplier, $object);
          });
        }
      };

      var background_image_parallax_2 = function($object, multiplier){
        multiplier = typeof multiplier !== 'undefined' ? multiplier : 0.5;
        multiplier = 1 - multiplier;
        var $doc = $(document);
        $object.css({"background-attachment" : "fixed"});
        
        $(window).scroll(function(){
          if($(window).width() > 768) {
            var firstTop = $object.offset().top,
                pos = $(window).scrollTop(),
                yPos = Math.round((multiplier * (firstTop - pos)) - 186);              

            var bg_css = 'center ' + yPos + 'px';

            $object.css({"background-position" : bg_css });
          } else {
            $object.css({"background-position" : "center" });
          }
        });
      };
      
      $(function(){
        // Hero Section - Background Parallax
        background_image_parallax($(".tm-parallax"), 0.30, false);
        background_image_parallax_2($("#contact"), 0.80);   
        background_image_parallax_2($("#testimonials"), 0.80);   
        
        // Handle window resize
        window.addEventListener('resize', function(){
          background_image_parallax($(".tm-parallax"), 0.30, true);
        }, true);

        // Detect window scroll and update navbar
        $(window).scroll(function(e){          
          if($(document).scrollTop() > 120) {
            $('.tm-navbar').addClass("scroll");
          } else {
            $('.tm-navbar').removeClass("scroll");
          }
        });
        
        // Close mobile menu after click 
        $('#tmNav a').on('click', function(){
          $('.navbar-collapse').removeClass('show'); 
        })

        // Scroll to corresponding section with animation
        $('#tmNav').singlePageNav({
          'easing': 'easeInOutExpo',
          'speed': 600
        });        
        
        // Add smooth scrolling to all links
        $("a").on('click', function(event) {
          if (this.hash !== "") {
            event.preventDefault();
            var hash = this.hash;

            $('html, body').animate({
              scrollTop: $(hash).offset().top
            }, 600, 'easeInOutExpo', function(){
              window.location.hash = hash;
            });
          } // End if
        });

        // Pop up
        $('.tm-gallery').magnificPopup({
          delegate: 'a',
          type: 'image',
          gallery: { enabled: true }
        });

        $('.tm-testimonials-carousel').slick({
          dots: true,
          prevArrow: false,
          nextArrow: false,
          infinite: false,
          slidesToShow: 3,
          slidesToScroll: 1,
          responsive: [
            {
              breakpoint: 992,
              settings: {
                slidesToShow: 2
              }
            },
            {
              breakpoint: 768,
              settings: {
                slidesToShow: 2
              }
            }, 
            {
              breakpoint: 480,
              settings: {
                  slidesToShow: 1
              }                 
            }
          ]
        });

        // Gallery
        $('.tm-gallery').slick({
          dots: true,
          infinite: false,
          slidesToShow: 5,
          slidesToScroll: 2,
          responsive: [
          {
            breakpoint: 1199,
            settings: {
              slidesToShow: 4,
              slidesToScroll: 2
            }
          },
          {
            breakpoint: 991,
            settings: {
              slidesToShow: 3,
              slidesToScroll: 2
            }
          },
          {
            breakpoint: 767,
            settings: {
              slidesToShow: 2,
              slidesToScroll: 1
            }
          },
          {
            breakpoint: 480,
            settings: {
              slidesToShow: 1,
              slidesToScroll: 1
            }
          }
        ]
        });
      });
      
      
      async function sendMessage() {
          const userInput = document.getElementById('chatInput').value;
          const chatBox = document.getElementById('chat-box');

          // Display user's message in the chat box
          chatBox.innerHTML += `<p><strong>You:</strong> ${chatInput}</p>`;

          // Send message to the server and get the bot's response
          const response = await fetch('/get_response', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ message: chatInput })
          });
          const data = await response.json();

          // Display bot's message
          chatBox.innerHTML += `<p><strong>Bot:</strong> ${data.response}</p>`;
          document.getElementById('chatInput').value = ''; // Clear input field
      }
      
      
      
      
    </script>
    
    <script>
    async function sendMessage() {
        const chatInput = document.getElementById("chatInput");
        const userMessage = chatInput.value.trim();

        if (userMessage === "") return;  // Don't send if the input is empty

        addMessageToChat("user", userMessage);  // Add the user's message
        chatInput.value = "";

        try {
            const response = await fetch("https://api.openai.com/v1/chat/completions", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer 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`  // Replace with your OpenAI API key
                },
                body: JSON.stringify({
                    model: "gpt-3.5-turbo",
                    messages: [{ role: "user", content: userMessage }]
                })
            });

            if (!response.ok) {
                throw new Error(`Error: ${response.status} ${response.statusText}`);
            }

            const data = await response.json();
            const botMessage = data.choices[0].message.content;

            addMessageToChat("bot", botMessage);  // Add the bot's message
        } catch (error) {
            console.error("Error:", error.message);
            addMessageToChat("bot", "Sorry, something went wrong. Please try again.");
        }
    }

</script>
    
    
  </body>
</html>